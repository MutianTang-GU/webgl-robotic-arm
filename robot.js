(()=>{"use strict";var t="undefined"!=typeof Float32Array?Float32Array:Array;function i(){var i=new t(16);return t!=Float32Array&&(i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0),i[0]=1,i[5]=1,i[10]=1,i[15]=1,i}function r(i){var r=new t(16);return r[0]=i[0],r[1]=i[1],r[2]=i[2],r[3]=i[3],r[4]=i[4],r[5]=i[5],r[6]=i[6],r[7]=i[7],r[8]=i[8],r[9]=i[9],r[10]=i[10],r[11]=i[11],r[12]=i[12],r[13]=i[13],r[14]=i[14],r[15]=i[15],r}function a(t,i,r){var a,o,n,e,s,h,l,c,g,_,u,f,A=r[0],d=r[1],R=r[2];return i===t?(t[12]=i[0]*A+i[4]*d+i[8]*R+i[12],t[13]=i[1]*A+i[5]*d+i[9]*R+i[13],t[14]=i[2]*A+i[6]*d+i[10]*R+i[14],t[15]=i[3]*A+i[7]*d+i[11]*R+i[15]):(a=i[0],o=i[1],n=i[2],e=i[3],s=i[4],h=i[5],l=i[6],c=i[7],g=i[8],_=i[9],u=i[10],f=i[11],t[0]=a,t[1]=o,t[2]=n,t[3]=e,t[4]=s,t[5]=h,t[6]=l,t[7]=c,t[8]=g,t[9]=_,t[10]=u,t[11]=f,t[12]=a*A+s*d+g*R+i[12],t[13]=o*A+h*d+_*R+i[13],t[14]=n*A+l*d+u*R+i[14],t[15]=e*A+c*d+f*R+i[15]),t}function o(t,i,r){var a=Math.sin(r),o=Math.cos(r),n=i[4],e=i[5],s=i[6],h=i[7],l=i[8],c=i[9],g=i[10],_=i[11];return i!==t&&(t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[4]=n*o+l*a,t[5]=e*o+c*a,t[6]=s*o+g*a,t[7]=h*o+_*a,t[8]=l*o-n*a,t[9]=c*o-e*a,t[10]=g*o-s*a,t[11]=_*o-h*a,t}function n(t,i,r){var a=Math.sin(r),o=Math.cos(r),n=i[0],e=i[1],s=i[2],h=i[3],l=i[8],c=i[9],g=i[10],_=i[11];return i!==t&&(t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=n*o-l*a,t[1]=e*o-c*a,t[2]=s*o-g*a,t[3]=h*o-_*a,t[8]=n*a+l*o,t[9]=e*a+c*o,t[10]=s*a+g*o,t[11]=h*a+_*o,t}function e(t,i,r){var a=Math.sin(r),o=Math.cos(r),n=i[0],e=i[1],s=i[2],h=i[3],l=i[4],c=i[5],g=i[6],_=i[7];return i!==t&&(t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t[0]=n*o+l*a,t[1]=e*o+c*a,t[2]=s*o+g*a,t[3]=h*o+_*a,t[4]=l*o-n*a,t[5]=c*o-e*a,t[6]=g*o-s*a,t[7]=_*o-h*a,t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,i=arguments.length;i--;)t+=arguments[i]*arguments[i];return Math.sqrt(t)});class s{constructor(){this.camara_x=0,this.camara_y=0,this.camara_z=0,this.rotation_1x=0,this.rotation_1y=0,this.rotation_1z=0,this.rotation_2x=0,this.rotation_2y=0,this.rotation_2z=0,this.rotation_3x=0,this.rotation_3y=0,this.rotation_3z=0}init(){const t=document.getElementById("glcanvas");if(this.gl=t.getContext("webgl2"),!this.gl)throw window.alert("Unable to initialize WebGL. Your browser or machine may not support it."),new Error("Unable to initialize WebGL");this.gl.clearColor(.9,.9,.9,1),this.shaderProgram=this.createShaderProgram("#version 300 es\n#pragma vscode_glsllint_stage: vert\n\nin vec4 a_position;\nin vec4 a_color;\n\nout vec4 v_color;\n\nuniform mat4 u_cube_view;\nuniform mat4 u_projection;\n\nvoid main() {\n    gl_Position = u_projection * u_cube_view * a_position;\n    v_color = a_color;\n}","#version 300 es\n#pragma vscode_glsllint_stage: frag\nprecision mediump float;\n\nin vec4 v_color;\nout vec4 outColor;\n\nvoid main() {\n    outColor = v_color;\n}")}createShaderProgram(t,i){const r=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(r,t),this.gl.compileShader(r);const a=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(a,i),this.gl.compileShader(a);const o=this.gl.createProgram();return this.gl.attachShader(o,r),this.gl.attachShader(o,a),this.gl.linkProgram(o),o}createBuffers(){const t=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],i=t.map(((t,i)=>i%3==1?1.5*t:t)),r=t.map(((t,i)=>i%3==0?t+2.5:.5*t)),a=t.map(((t,i)=>(t*=.25,i%3==0?t+4:t))),o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(i),this.gl.STATIC_DRAW);const n=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(r),this.gl.STATIC_DRAW);const e=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,e),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.STATIC_DRAW);const s=[[1,.647,0,1],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,1,0,1],[1,0,1,1]];let h=[];for(let t=0;t<6;t++){const i=s[t];for(let t=0;t<4;t++)h=h.concat(i)}const l=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,l),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(h),this.gl.STATIC_DRAW);const c=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,c),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),this.gl.STATIC_DRAW),{position:[o,n,e],color:l,indices:c}}draw(){this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);const t=45*Math.PI/180,s=this.gl.canvas.clientWidth/this.gl.canvas.clientHeight;this.projectionMatrix=i(),function(t,i,r,a,o){var n,e=1/Math.tan(i/2);t[0]=e/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(n=1/(a-o),t[10]=(o+a)*n,t[14]=2*o*a*n):(t[10]=-1,t[14]=-2*a)}(this.projectionMatrix,t,s,.1,100);const{position:[h,l,c],color:g,indices:_}=this.createBuffers(),u=i();a(u,u,[-2.5+this.camara_x,this.camara_y,-10+this.camara_z]),a(u,u,[-1,0,0]),o(u,u,this.rotation_1x/180*Math.PI),n(u,u,this.rotation_1y/180*Math.PI),e(u,u,this.rotation_1z/180*Math.PI),a(u,u,[1,0,0]),this.draw_cube(this.shaderProgram,h,g,_,u);const f=r(u);a(f,f,[1,0,0]),o(f,f,this.rotation_2x/180*Math.PI),n(f,f,this.rotation_2y/180*Math.PI),e(f,f,this.rotation_2z/180*Math.PI),a(f,f,[-1,0,0]),this.draw_cube(this.shaderProgram,l,g,_,f);const A=r(f);a(A,A,[3.5,0,0]),o(A,A,this.rotation_3x/180*Math.PI),n(A,A,this.rotation_3y/180*Math.PI),e(A,A,this.rotation_3z/180*Math.PI),a(A,A,[-3.5,0,0]),this.draw_cube(this.shaderProgram,c,g,_,A)}draw_cube(t,i,r,a,o){this.gl.useProgram(t),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(t,"u_projection"),!1,this.projectionMatrix),this.gl.uniformMatrix4fv(this.gl.getUniformLocation(t,"u_cube_view"),!1,o);const n=this.gl.getAttribLocation(t,"a_position");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,i);{const t=3,i=this.gl.FLOAT,r=!1,a=0,o=0;this.gl.vertexAttribPointer(n,t,i,r,a,o)}this.gl.enableVertexAttribArray(n);const e=this.gl.getAttribLocation(t,"a_color");this.gl.bindBuffer(this.gl.ARRAY_BUFFER,r);{const t=4,i=this.gl.FLOAT,r=!1,a=0,o=0;this.gl.vertexAttribPointer(e,t,i,r,a,o)}this.gl.enableVertexAttribArray(e),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a);{const t=36,i=this.gl.UNSIGNED_SHORT,r=0;this.gl.drawElements(this.gl.TRIANGLES,t,i,r)}}}function h(){const t=new s;t.init(),t.draw();for(const i of["camara_x","camara_y","camara_z","rotation_1x","rotation_1y","rotation_1z","rotation_2x","rotation_2y","rotation_2z","rotation_3x","rotation_3y","rotation_3z"])document.getElementById(i).addEventListener("input",(r=>{t[i]=Number(r.target.value),t.draw()}))}"loading"!==document.readyState?h():document.addEventListener("DOMContentLoaded",h)})();